local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UIS = game:GetService("UserInputService")
local LP = Players.LocalPlayer

local LINKS = {
	Discord = "https://discord.gg/XXXX",
	YouTube = "https://youtube.com/XXXX",
	Twitter = "https://twitter.com/XXXX",
	Donate  = "https://saweria.co/XXXX"
}

local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = "FenAdminUI"

local OpenBtn = Instance.new("TextButton", gui)
OpenBtn.Size = UDim2.fromOffset(50,50)
OpenBtn.Position = UDim2.fromScale(0.02,0.4)
OpenBtn.BackgroundColor3 = Color3.fromRGB(20,20,20)
OpenBtn.Text = "FZ"
OpenBtn.TextColor3 = Color3.fromRGB(80,170,255)
OpenBtn.Font = Enum.Font.GothamBold
OpenBtn.TextSize = 16
OpenBtn.Visible = false
OpenBtn.Active = true
OpenBtn.Draggable = true

Instance.new("UICorner", OpenBtn).CornerRadius = UDim.new(1,0)

local stroke = Instance.new("UIStroke", OpenBtn)
stroke.Color = Color3.fromRGB(80,170,255)
stroke.Thickness = 2

local Main = Instance.new("Frame", gui)
Main.Size = UDim2.fromOffset(620, 300)
Main.Position = UDim2.fromScale(0.25, 0.25)
Main.BackgroundColor3 = Color3.fromRGB(15,15,15)
Main.BorderSizePixel = 0
Main.Active = true
Main.Draggable = true
Main.ClipsDescendants = true
Instance.new("UICorner", Main).CornerRadius = UDim.new(0,16)

Main.Size = UDim2.fromOffset(0,0)
TweenService:Create(Main,TweenInfo.new(.35,Enum.EasingStyle.Quart,Enum.EasingDirection.Out),{
	Size = UDim2.fromOffset(620,300)
}):Play()

local Side = Instance.new("Frame", Main)
Side.Size = UDim2.fromOffset(60,300)
Side.BackgroundColor3 = Color3.fromRGB(10,10,10)
Side.BorderSizePixel = 0

local Divider = Instance.new("Frame", Main)
Divider.Size = UDim2.fromOffset(2,300)
Divider.Position = UDim2.fromOffset(60,0)
Divider.BackgroundColor3 = Color3.fromRGB(80,170,255)
Divider.BorderSizePixel = 0

local function SideBtn(text,color)
	local b = Instance.new("TextButton", Side)
	b.Size = UDim2.fromOffset(40,40)
	b.BackgroundColor3 = color
	b.Text = text
	b.TextColor3 = Color3.new(1,1,1)
	b.Font = Enum.Font.GothamBold
	b.TextSize = 14
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,10)
	return b
end

local CM  = SideBtn("CM", Color3.fromRGB(70,70,70))
local HUB = SideBtn("HUB",Color3.fromRGB(70,70,70))
local HM  = SideBtn("HM", Color3.fromRGB(70,70,70))
local X   = SideBtn("X",  Color3.fromRGB(180,40,40))

CM.Position  = UDim2.fromOffset(10,20)
HUB.Position = UDim2.fromOffset(10,70)
HM.Position  = UDim2.fromOffset(10,120)
X.Position   = UDim2.fromOffset(10,240)

local Content = Instance.new("Frame", Main)
Content.Position = UDim2.fromOffset(70,10)
Content.Size = UDim2.fromOffset(540,280)
Content.BackgroundTransparency = 1

local Pages = {}

local function NewPage(name)
	local f = Instance.new("Frame", Content)
	f.Size = UDim2.fromScale(1,1)
	f.Visible = false
	f.BackgroundTransparency = 1
	Pages[name] = f
	return f
end

local Home = NewPage("Home")
local Cmd  = NewPage("Command")
local Hub  = NewPage("Hub")

Home.Visible = true

local title = Instance.new("TextLabel", Home)
title.Text = "Fen Admin  |  version 1.7"
title.Font = Enum.Font.GothamBold
title.TextSize = 20
title.TextColor3 = Color3.new(1,1,1)
title.BackgroundTransparency = 1
title.Position = UDim2.fromOffset(10,10)
title.Size = UDim2.fromOffset(300,30)

local user = Instance.new("TextLabel", Home)
user.Text = "Username : "..LP.Name
user.Font = Enum.Font.Gotham
user.TextSize = 14
user.TextColor3 = Color3.fromRGB(200,200,200)
user.BackgroundTransparency = 1
user.Position = UDim2.fromOffset(10,45)
user.Size = UDim2.fromOffset(300,20)

local img = Instance.new("ImageLabel", Home)
img.Size = UDim2.fromOffset(60,60)
img.Position = UDim2.fromOffset(450,10)
img.BackgroundTransparency = 1
img.Image = "rbxthumb://type=AvatarHeadShot&id="..LP.UserId.."&w=150&h=150"
Instance.new("UICorner", img).CornerRadius = UDim.new(1,0)

local function SocialBtn(text,color,x,y,link)
	local b = Instance.new("TextButton", Home)
	b.Text = text
	b.Font = Enum.Font.GothamBold
	b.TextSize = 14
	b.TextColor3 = Color3.new(1,1,1)
	b.BackgroundColor3 = color
	b.Size = UDim2.fromOffset(100,32)
	b.Position = UDim2.fromOffset(x,y)
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,8)

	b.MouseButton1Click:Connect(function()
		setclipboard(link)
		game.StarterGui:SetCore("SendNotification",{
			Title="Copied!",
			Text=text.." link copied",
			Duration=2
		})
	end)
end

SocialBtn("Discord", Color3.fromRGB(90,60,200),10,90,LINKS.Discord)
SocialBtn("YouTube", Color3.fromRGB(200,50,50),120,90,LINKS.YouTube)
SocialBtn("Twitter", Color3.fromRGB(60,170,255),230,90,LINKS.Twitter)
SocialBtn("Donate",  Color3.fromRGB(60,200,120),340,90,LINKS.Donate)

local recTitle = Instance.new("TextLabel", Home)
recTitle.Text = "Recommended Scripts"
recTitle.Font = Enum.Font.GothamBold
recTitle.TextSize = 16
recTitle.TextColor3 = Color3.fromRGB(80,170,255)
recTitle.BackgroundTransparency = 1
recTitle.Position = UDim2.fromOffset(10,140)
recTitle.Size = UDim2.fromOffset(300,20)

local recFrame = Instance.new("Frame", Home)
recFrame.Position = UDim2.fromOffset(10,165)
recFrame.Size = UDim2.fromOffset(520,90)
recFrame.BackgroundTransparency = 1

local recLayout = Instance.new("UIListLayout", recFrame)
recLayout.Padding = UDim.new(0,8)
recLayout.FillDirection = Enum.FillDirection.Horizontal

local function RecommendedBtn(name, scriptCode)
	local b = Instance.new("TextButton", recFrame)
	b.Size = UDim2.fromOffset(160,40)
	b.BackgroundColor3 = Color3.fromRGB(45,45,45)
	b.Text = name
	b.Font = Enum.Font.Gotham
	b.TextSize = 14
	b.TextColor3 = Color3.new(1,1,1)
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,10)

	local stroke = Instance.new("UIStroke", b)
	stroke.Color = Color3.fromRGB(80,170,255)
	stroke.Thickness = 1
	stroke.Transparency = 0.6

	b.MouseButton1Click:Connect(function()
		if scriptCode and scriptCode ~= "" then
			loadstring(scriptCode)()
		else
			game.StarterGui:SetCore("SendNotification",{
				Title = "Coming Soon",
				Text = name.." Next update",
				Duration = 2
			})
		end
	end)
end

-- RECOMMENDED SCRIPTS
RecommendedBtn("Infinite Yield", [[
-- here
]])

RecommendedBtn("coming soon", [[
-- here
]])

RecommendedBtn("coming soon", [[
-- here
]])

local search = Instance.new("TextBox", Cmd)
search.PlaceholderText = "search command"
search.Size = UDim2.fromOffset(300,32)
search.Position = UDim2.fromOffset(10,10)
search.BackgroundColor3 = Color3.fromRGB(40,40,40)
search.TextColor3 = Color3.new(1,1,1)
search.Font = Enum.Font.Gotham
search.TextSize = 14
Instance.new("UICorner", search).CornerRadius = UDim.new(0,8)

local list = Instance.new("ScrollingFrame", Cmd)
list.Position = UDim2.fromOffset(10,55)
list.Size = UDim2.fromOffset(300,200)
list.CanvasSize = UDim2.new(0,0,0,0)
list.ScrollBarThickness = 6         
list.ScrollBarImageTransparency = 0      
list.ScrollBarImageColor3 = Color3.fromRGB(255,255,255) 
list.BackgroundTransparency = 1
list.AutomaticCanvasSize = Enum.AutomaticSize.None

list.ScrollingDirection = Enum.ScrollingDirection.Y
list.ElasticBehavior = Enum.ElasticBehavior.WhenScrollable
list.ScrollBarImageTransparency = 0.2

local layout = Instance.new("UIListLayout", list)
layout.Padding = UDim.new(0,8)

layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
	list.CanvasSize = UDim2.new(0,0,0, layout.AbsoluteContentSize.Y + 10)
end)

local HttpService = game:GetService("HttpService")

local function ClearList()
	for _,v in pairs(list:GetChildren()) do
		if v:IsA("TextButton") then
			v:Destroy()
		end
	end
end

local function AddResult(title, scriptCode)
	local b = Instance.new("TextButton", list)
	b.Size = UDim2.fromOffset(300,40)
	b.BackgroundColor3 = Color3.fromRGB(55,55,55)
	b.TextWrapped = true
	b.TextXAlignment = Left
	b.Text = "  "..title
	b.Font = Enum.Font.Gotham
	b.TextSize = 13
	b.TextColor3 = Color3.new(1,1,1)
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,8)

	b.MouseButton1Click:Connect(function()
		loadstring(scriptCode)()
		game.StarterGui:SetCore("SendNotification",{
			Title = "Executed",
			Text = title,
			Duration = 3
		})
	end)
end

local httpRequest = request or http_request or syn.request
if not httpRequest then
	warn("Executor does not support request")
end

local function AddResult(title, scriptCode)
	local b = Instance.new("TextButton", list)
	b.Size = UDim2.fromOffset(300,40)
	b.BackgroundColor3 = Color3.fromRGB(55,55,55)
	b.TextWrapped = true
	b.TextXAlignment = Enum.TextXAlignment.Left
	b.Text = "  "..title
	b.Font = Enum.Font.Gotham
	b.TextSize = 13
	b.TextColor3 = Color3.new(1,1,1)
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,8)

	b.MouseButton1Click:Connect(function()
		loadstring(scriptCode)()
	end)
end

local function SearchScriptBlox(query)
	if query == "" or not httpRequest then return end
	ClearList()

	local res = httpRequest({
		Url = "https://scriptblox.com/api/script/search?q="..HttpService:UrlEncode(query).."&max=10",
		Method = "GET"
	})

	if not res or not res.Body then
		warn("HTTP failed")
		return
	end

	local data = HttpService:JSONDecode(res.Body)
	if not data or not data.result or not data.result.scripts then
		warn("Empty result")
		return
	end

	for _,s in pairs(data.result.scripts) do
		if s.script then
			AddResult(s.title or "No Title", s.script)
		end
	end
end

search.FocusLost:Connect(function(enter)
	if enter then
		SearchScriptBlox(search.Text)
	end
end)

local function Show(page)
	for _,p in pairs(Pages) do p.Visible = false end
	page.Visible = true
end

CM.MouseButton1Click:Connect(function() Show(Cmd) end)
HM.MouseButton1Click:Connect(function() Show(Home) end)
HUB.MouseButton1Click:Connect(function() Show(Hub) end)
X.MouseButton1Click:Connect(function()
	Main.Visible = false
	OpenBtn.Visible = true
end)

OpenBtn.MouseButton1Click:Connect(function()
	Main.Visible = true
	OpenBtn.Visible = false
end)

